{
  "id" : "com.github.Johnn3y.curlew",
  "runtime" : "org.gnome.Platform",
  "runtime-version" : "3.28",
  "sdk" : "org.gnome.Sdk",
  "command" : "curlew",
  "modules" : [
    {
      "name" : "ffmpeg",
      "config-opts" : [
        "--enable-shared",
        "--disable-static",
        "--disable-doc",
        "--disable-ffplay",
        "--disable-ffserver",
        "--disable-devices",
        "--enable-gnutls",
        "--enable-libvorbis"
      ],
      "sources" : [
        {
          "url" : "https://ffmpeg.org/releases/ffmpeg-3.4.2.tar.xz",
          "sha256" : "2b92e9578ef8b3e49eeab229e69305f5f4cbc1fdaa22e927fc7fca18acccd740",
          "type" : "archive"
        }
      ],
      "cleanup" : [
        "/share/ffmpeg"
      ],
      "post-install" : [
        "install -Dm644 COPYING.LGPLv3 /app/share/licenses/ffmpeg/COPYING"
      ]
    },
    {
      "name" : "Curlew",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url" : "https://github.com/Johnn3y/Curlew",
          "branch" : "flatpak",
          "type" : "git"
        }
      ],
      "build-commands" : [
        "python3 setup.py build",
        "python3 setup.py install --prefix=/app"
      ]
    }
  ],
  "cleanup" : [
    "/include",
    "/lib/pkgconfig"
  ],
  "finish-args" : [
    "--socket=wayland",
    "--socket=x11",
    "--share=ipc",
    "--socket=system-bus",
    "--socket=session-bus",
    "--filesystem=home",
    "--filesystem=xdg-run/dconf",
    "--filesystem=~/.config/dconf:ro",
    "--talk-name=ca.desrt.dconf",
    "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
  ]
}
